<div class="add-event">
    <form [formGroup]="formEvent" class="add-event__form">
      <mat-card class="add-event__field">
        <mat-form-field class="add-event__input">
          <input matInput formControlName="title" type="text" placeholder="{{'PAGE.EVENTS.ADD_EVENT.FIELD.NAME_EVENT' | translate}}">
          <mat-error>{{'FIELD.ERROR.OBLIGATORY_FIELD' | translate}}</mat-error>
        </mat-form-field>
        <mat-form-field class="add-event__input">
          <input matInput formControlName="segmentation" [matAutocomplete]="auto" type="text" placeholder="{{'PAGE.EVENTS.ADD_EVENT.FIELD.SEGMENTATION' | translate}}">
          <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn">
            <mat-option *ngFor="let segmentation of segmentationOptions | async" [value]="segmentation">
              {{segmentation.title}}
            </mat-option>
          </mat-autocomplete>
        </mat-form-field>
        <mat-label>{{'PAGE.EVENTS.ADD_EVENT.FIELD.MULTIPLICITY' | translate}}</mat-label>
        <mat-slider
          formControlName="multiplicity"
          class="add-event__input"
          [displayWith]="getFormatTimeFn"
          thumbLabel
          step="1"
          tickInterval="1"
          min="0"
          [max]="maxSize"></mat-slider>
        <mat-form-field class="add-event__input">
          <mat-label>{{'PAGE.EVENTS.ADD_EVENT.FIELD.TYPE_EVENT.TITLE' | translate}}</mat-label>
          <mat-select formControlName="taskType">
            <mat-option value="1">{{'PAGE.EVENTS.ADD_EVENT.FIELD.TYPE_EVENT.EMAIL' | translate}}</mat-option>
            <mat-option value="2">{{'PAGE.EVENTS.ADD_EVENT.FIELD.TYPE_EVENT.SMS' | translate}}</mat-option>
          </mat-select>
        </mat-form-field>
      </mat-card>

      <mat-card class="add-event__type">
        <app-editor-email *ngIf="taskType === '1'" [params]="{ 'segmentationId': segmentationId }" [totalCount]="totalCount" whichButton="data" (messageEvent)="addEvent( $event )"></app-editor-email>
        <app-editor-sms  *ngIf="taskType === '2'" [params]="{ 'segmentationId': segmentationId }" [totalCount]="totalCount" whichButton="data" (messageEvent)="addEvent( $event )"></app-editor-sms>
      </mat-card>
    </form>

  <mat-card *ngIf="task" class="add-event__card">
    <mat-card-header>
      <div mat-card-avatar class="example-header-image"></div>
      <mat-card-title>{{'PAGE.EVENTS.ADD_EVENT.CARD.NAME_EVENT' | translate}} {{task.title}}</mat-card-title>
      <mat-card-subtitle>{{'PAGE.EVENTS.ADD_EVENT.CARD.SEGMENTATION' | translate}} {{task.segmentation}}</mat-card-subtitle>
      <mat-card-subtitle>
        {{'PAGE.EVENTS.ADD_EVENT.CARD.TYPE_EVENT.TITLE' | translate}}
        {{task.taskType === 1 ? ('PAGE.EVENTS.ADD_EVENT.CARD.TYPE_EVENT.EMAIL' | translate) : ('PAGE.EVENTS.ADD_EVENT.CARD.TYPE_EVENT.SMS' | translate) }}
      </mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      <div class="add-event__template" [innerHtml]="task.distributionTemplate | safeHtml" > </div>
    </mat-card-content>
    <mat-card-actions>
      <button
        class="add-event__button"
        mat-raised-button
        color="primary"
        (click)="trigger()"
        appAccessRights="task:update"
      >
        {{'BUTTON.TRIGGER_EVENT' | translate}}
        <mat-icon>send</mat-icon>
      </button>
    </mat-card-actions>
  </mat-card>
</div>












