<div class="distribution-report">
  <mat-vertical-stepper linear #stepper>

    <mat-step >
      <ng-template matStepLabel>Шаблон формы отчета</ng-template>

      <mat-progress-bar *ngIf="isProgress" mode="buffer"></mat-progress-bar>
      <mat-tree *ngIf="!isProgress" [dataSource]="dataSource" [treeControl]="treeControl" class="example-tree">
        <!-- This is the tree node template for leaf nodes -->
        <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle>
          <li class="mat-tree-node">
            <!-- use a disabled button to provide padding for tree leaf -->
            <button mat-icon-button disabled></button>
            <button mat-button class="distribution-report__template" (click)="onSendTemplate( node.name )">{{node.name.split('/')[node.name.split('/').length - 1]}}</button>
          </li>
        </mat-tree-node>
        <!-- This is the tree node template for expandable nodes -->
        <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild">
          <li>
            <div class="mat-tree-node" matTreeNodeToggle>
              <button mat-icon-button >
                <mat-icon class="mat-icon-rtl-mirror">
                  folder
                </mat-icon>
              </button>
              <span class="distribution-report__dir">{{node.name}}</span>
            </div>
            <ul [class.example-tree-invisible]="!treeControl.isExpanded(node)">
              <ng-container matTreeNodeOutlet></ng-container>
            </ul>
          </li>
        </mat-nested-tree-node>
      </mat-tree>
    </mat-step>

    <mat-step [stepControl]="dynamicForm">
      <ng-template matStepLabel>Форма запроса отчета</ng-template>

      <app-dynamic-form
        *ngIf="paramsDynamicForm"
        [dataObject]="paramsDynamicForm"
        [splitInput]="2"
        [cols]="3"
        rowHeight="200px"
        (dynamicFormEmit)="onDynamicFormValue($event)"
      >
      </app-dynamic-form>

      <div>
        <button mat-button matStepperPrevious>Back</button>
        <button mat-button (click)="resultForm()">Next</button>
      </div>
    </mat-step>

    <mat-step>
      <ng-template matStepLabel>Done</ng-template>
      You are now done.
      <div>
        <button mat-button matStepperPrevious>Back</button>
        <button mat-button (click)="stepper.reset()">Reset</button>
      </div>
    </mat-step>
  </mat-vertical-stepper>
</div>
