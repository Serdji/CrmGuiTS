<div class="add-segmentation" appAccessRights="analytics:read" appAccessMessage="true">

  <div class="add-segmentation__stepper" *ngIf="!isFormSegmentation">
    <form [formGroup]="formSegmentationStepper">
      <mat-vertical-stepper linear #stepper>
        <mat-step
          [completed]="
          !formSegmentationStepper.get('segmentationTitle').invalid &&
          !formSegmentationStepper.get('segmentationGranularity').invalid">
          <ng-template
            matStepLabel>{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.GROUP_SEGMENTATION.GROUP_SEGMENTATION' | translate}}</ng-template>
          <mat-form-field class="add-segmentation__input">
            <input matInput formControlName="segmentationTitle" type="text"
                   placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.GROUP_SEGMENTATION.GROUP_SEGMENTATION' | translate}}">
            <mat-error>{{'FIELD.ERROR.OBLIGATORY_FIELD' | translate}}</mat-error>
          </mat-form-field>
          <mat-form-field class="add-segmentation__input">
            <mat-select formControlName="segmentationGranularity"
                        placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.GROUP_SEGMENTATION.GRANULARITY.TITLE' | translate}}">
              <mat-option
                value="1">{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.GROUP_SEGMENTATION.GRANULARITY.PASSENGER' | translate}}</mat-option>
              <mat-option
                value="2">{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.GROUP_SEGMENTATION.GRANULARITY.ORDERS' | translate}}</mat-option>
              <mat-option
                value="3">{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.GROUP_SEGMENTATION.GRANULARITY.COUPON' | translate}}</mat-option>
            </mat-select>
            <mat-error>{{'FIELD.ERROR.OBLIGATORY_FIELD' | translate}}</mat-error>
          </mat-form-field>
          <div>
            <button mat-button matStepperNext>{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.BUTTON.NEXT' | translate}}</button>
          </div>
        </mat-step>

        <mat-step [completed]="formSegmentationStepper.get('subjectAnalysis').value !== ''">
          <ng-template
            matStepLabel>{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SUBJECT_ANALYSIS.TITLE' | translate}}</ng-template>
          <div class="add-segmentation__content-title-wrapper">
            <mat-icon *ngIf="resetRadioButtonFood"
                      matTooltip="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SUBJECT_ANALYSIS.REMOVE' | translate}}"
                      (click)="resetRadioButton('subjectAnalysis')">remove_circle_outline
            </mat-icon>
          </div>
          <mat-card-content class="add-segmentation__content">
            <mat-radio-group class="add-segmentation__input" formControlName="subjectAnalysis">
              <div class="add-segmentation__input-radio-wrapper">
                <div class="add-segmentation__input-radio-group">
                  <mat-radio-button class="add-segmentation__input-radio"
                                    value="segment">{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SUBJECT_ANALYSIS.SEGMENT' | translate}}
                  </mat-radio-button>
                  <mat-radio-button class="add-segmentation__input-radio _margin-none"
                                    value="payment">{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SUBJECT_ANALYSIS.PAYMENT' | translate}}
                  </mat-radio-button>
                </div>
              </div>
            </mat-radio-group>
          </mat-card-content>
          <div class="add-segmentation__stepper-button">
            <button mat-button
                    matStepperPrevious>{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.BUTTON.PREV' | translate}}</button>
            <button mat-button matStepperNext>{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.BUTTON.NEXT' | translate}}</button>
          </div>
        </mat-step>

        <mat-step
          *ngIf="formSegmentationStepper.get('subjectAnalysis').value === 'segment'"
          [completed]="
            !formSegmentationStepper.get('segmentsCountFromInclude').invalid &&
            !formSegmentationStepper.get('segmentsCountToExclude').invalid &&
            !formSegmentationStepper.get('eDocTypeS').invalid"
        >
          <ng-template
            matStepLabel>{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.NUMBER_SEGMENTS.TITLE' | translate}}</ng-template>
          <div>
            <div class="add-segmentation__content">
              <mat-form-field class="add-segmentation__input">
                <input formControlName="segmentsCountFromInclude" matInput type="text"
                       placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.NUMBER_SEGMENTS.FROM' | translate}}">
                <mat-error>{{'FIELD.ERROR.OBLIGATORY_FIELD' | translate}}</mat-error>
              </mat-form-field>
              <mat-form-field class="add-segmentation__input">
                <input formControlName="segmentsCountToExclude" matInput type="text"
                       placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.NUMBER_SEGMENTS.TO' | translate}}">
                <mat-error>{{'FIELD.ERROR.OBLIGATORY_FIELD' | translate}}</mat-error>
              </mat-form-field>
              <mat-form-field class="add-segmentation__input">
                <mat-select formControlName="eDocTypeS">
                  <mat-option
                    value="T">{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.NUMBER_SEGMENTS.TICKETS' | translate}}</mat-option>
                  <mat-option
                    value="E">{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.NUMBER_SEGMENTS.SERVICES' | translate}}</mat-option>
                </mat-select>
                <mat-error>{{'FIELD.ERROR.OBLIGATORY_FIELD' | translate}}</mat-error>
              </mat-form-field>
            </div>
          </div>
          <div class="add-segmentation__stepper-button">
            <button mat-button
                    matStepperPrevious>{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.BUTTON.PREV' | translate}}</button>
            <button mat-button matStepperNext
                    (click)="initAutocomplete( 'formSegmentationStepper' )">{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.BUTTON.NEXT' | translate}}</button>
          </div>
        </mat-step>

        <mat-step
          *ngIf="formSegmentationStepper.get('subjectAnalysis').value === 'payment'"
          [completed]="
            !formSegmentationStepper.get('moneyAmountFromInclude').invalid &&
            !formSegmentationStepper.get('moneyAmountToExclude').invalid &&
            !formSegmentationStepper.get('eDocTypeP').invalid"
        >
          <ng-template
            matStepLabel>{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.ORDER_AMOUNT.TITLE' | translate}}</ng-template>
          <div class="add-segmentation__content">
            <mat-form-field class="add-segmentation__input">
              <input formControlName="moneyAmountFromInclude" matInput type="text"
                     placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.ORDER_AMOUNT.FROM' | translate}}">
              <mat-error>{{'FIELD.ERROR.OBLIGATORY_FIELD' | translate}}</mat-error>
            </mat-form-field>
            <mat-form-field class="add-segmentation__input">
              <input formControlName="moneyAmountToExclude" matInput type="text"
                     placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.ORDER_AMOUNT.TO' | translate}}">
              <mat-error>{{'FIELD.ERROR.OBLIGATORY_FIELD' | translate}}</mat-error>
            </mat-form-field>
            <mat-form-field class="add-segmentation__input">
              <input matInput formControlName="currency" type="text"
                     placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.ORDER_AMOUNT.CURRENCY' | translate}}">
            </mat-form-field>
            <mat-form-field class="add-segmentation__input">
              <mat-select formControlName="eDocTypeP">
                <mat-option
                  value="T">{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.ORDER_AMOUNT.TICKETS' | translate}}</mat-option>
                <mat-option
                  value="E">{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.ORDER_AMOUNT.SERVICES' | translate}}</mat-option>
              </mat-select>
              <mat-error>{{'FIELD.ERROR.OBLIGATORY_FIELD' | translate}}</mat-error>
            </mat-form-field>
          </div>
          <div class="add-segmentation__stepper-button">
            <button mat-button
                    matStepperPrevious>{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.BUTTON.PREV' | translate}}</button>
            <button mat-button matStepperNext
                    (click)="initAutocomplete( 'formSegmentationStepper' )">{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.BUTTON.NEXT' | translate}}</button>
          </div>
        </mat-step>

        <mat-step *ngIf="
          formSegmentationStepper.get('eDocTypeS').value === 'T'
        ">
          <ng-template matStepLabel>{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.TICKET.TITLE' | translate}}</ng-template>
          <div class="add-segmentation__content _none-justify">
            <mat-form-field class="add-segmentation__input">
              <input matInput formControlName="timeBeforeDepartureT" mask="d0 Hh:m0" [dropSpecialCharacters]="false"
                     [showMaskTyped]="true"
                     placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.TICKET.DISPATCH_TIME' | translate}}">
            </mat-form-field>
            <mat-form-field class="profile-search__input">
              <input matInput formControlName="airlineLCodeIdT" type="text"
                     placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.TICKET.AIRLINE_L_CODE' | translate}}"
                     [matAutocomplete]="airlineLCodeT">
              <mat-autocomplete #airlineLCodeT="matAutocomplete" [displayWith]="displayFn">
                <mat-option *ngFor="let airlineLCode of airlineLCodeOptionsT | async" [value]="airlineLCode">
                  {{airlineLCode.title}}
                </mat-option>
              </mat-autocomplete>
            </mat-form-field>
            <mat-form-field class="add-segmentation__input">
              <input matInput type="text"
                     placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.TICKET.FLIGHT_NO' | translate}}"
                     formControlName="flightNoT">
            </mat-form-field>
            <mat-form-field class="add-segmentation__input">
              <input formControlName="arrivalDFromIncludeT" matInput
                     placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.TICKET.ARR_D_FROM' | translate}}"
                     [matDatepicker]="arrivalDFromIncludeT">
              <mat-datepicker-toggle matSuffix [for]="arrivalDFromIncludeT"></mat-datepicker-toggle>
              <mat-datepicker touchUi="true" #arrivalDFromIncludeT></mat-datepicker>
            </mat-form-field>
            <mat-form-field class="add-segmentation__input">
              <input formControlName="arrivalDToExcludeT" matInput
                     placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.TICKET.ARR_D_TO' | translate}}"
                     [matDatepicker]="arrivalDToExcludeT">
              <mat-datepicker-toggle matSuffix [for]="arrivalDToExcludeT"></mat-datepicker-toggle>
              <mat-datepicker touchUi="true" #arrivalDToExcludeT></mat-datepicker>
            </mat-form-field>
            <mat-form-field class="add-segmentation__input">
              <input matInput formControlName="departureLocationCodeT" type="text"
                     placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.TICKET.DEP_LOC' | translate}}"
                     [matAutocomplete]="airportfromT">
              <mat-autocomplete #airportfromT="matAutocomplete">
                <mat-option *ngFor="let airport of airportsFromOptionsT | async"
                            [value]="airport.locationCode">{{ airport.locationCode }}</mat-option>
              </mat-autocomplete>
            </mat-form-field>
            <mat-form-field class="add-segmentation__input">
              <input matInput formControlName="arrivalLocationCodeT" type="text"
                     placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.TICKET.ARR_LOC' | translate}}"
                     [matAutocomplete]="airporttoT">
              <mat-autocomplete #airporttoT="matAutocomplete">
                <mat-option *ngFor="let airport of airportsToOptionsT | async"
                            [value]="airport.locationCode">{{ airport.locationCode }}</mat-option>
              </mat-autocomplete>
            </mat-form-field>
            <mat-form-field class="add-segmentation__input">
              <input matInput formControlName="cabinT" type="text"
                     placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.TICKET.CABIN' | translate}}">
            </mat-form-field>
            <mat-form-field class="add-segmentation__input">
              <input matInput formControlName="rbdT" type="text"
                     placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.TICKET.RDB' | translate}}">
            </mat-form-field>
            <mat-form-field class="add-segmentation__input">
              <input matInput formControlName="fareCodeT" type="text"
                     placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.TICKET.RARE_CODE' | translate}}">
            </mat-form-field>
            <mat-form-field class="add-segmentation__input">
              <input matInput formControlName="posGdsT" type="text"
                     placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.TICKET.POS_GDS' | translate}}">
            </mat-form-field>
            <!--<mat-form-field class="add-segmentation__input">-->
            <!--<input matInput formControlName="serviceCodeT" type="text" placeholder="Код услути">-->
            <!--</mat-form-field>-->
            <!--<mat-form-field class="add-segmentation__input">-->
            <!--<input matInput type="text" placeholder="Код страны (точка продажи)">-->
            <!--</mat-form-field>-->
            <!--<mat-form-field class="add-segmentation__input">-->
            <!--<input matInput type="text" placeholder="Код порта/города (точка продажи)">-->
            <!--</mat-form-field>-->
            <mat-form-field class="add-segmentation__input">
              <input matInput formControlName="posIdT" type="text"
                     placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.TICKET.POS_ID' | translate}}">
            </mat-form-field>
            <mat-form-field class="add-segmentation__input">
              <input matInput formControlName="posAgencyT" type="text"
                     placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.TICKET.POS_AGENCY' | translate}}">
            </mat-form-field>
          </div>
          <div class="add-segmentation__stepper-button">
            <button mat-button
                    matStepperPrevious>{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.BUTTON.PREV' | translate}}</button>
            <button mat-button matStepperNext>{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.BUTTON.NEXT' | translate}}</button>
          </div>
        </mat-step>

        <mat-step *ngIf="
          formSegmentationStepper.get('eDocTypeS').value === 'E' ||
          formSegmentationStepper.get('eDocTypeP').value === 'E'
        ">
          <ng-template matStepLabel>{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SERVICES.TITLE' | translate}}</ng-template>
          <div class="add-segmentation__content _none-justify">
            <mat-form-field class="profile-search__input">
              <input matInput formControlName="timeBeforeDepartureE" mask="d0 Hh:m0" [dropSpecialCharacters]="false"
                     [showMaskTyped]="true"
                     placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SERVICES.DISPATCH_TIME' | translate}}">
            </mat-form-field>
            <mat-form-field class="profile-search__input">
              <input matInput formControlName="airlineLCodeIdE" type="text"
                     placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SERVICES.AIRLINE_L_CODE' | translate}}"
                     [matAutocomplete]="airlineLCodeE">
              <mat-autocomplete #airlineLCodeE="matAutocomplete" [displayWith]="displayFn">
                <mat-option *ngFor="let airlineLCode of airlineLCodeOptionsE | async" [value]="airlineLCode">
                  {{airlineLCode.title}}
                </mat-option>
              </mat-autocomplete>
            </mat-form-field>
            <mat-form-field class="add-segmentation__input">
              <input matInput type="text"
                     placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SERVICES.FLIGHT_NO' | translate}}"
                     formControlName="flightNoE">
            </mat-form-field>
            <mat-form-field class="add-segmentation__input">
              <input formControlName="arrivalDFromIncludeE" matInput
                     placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SERVICES.ARR_D_FROM' | translate}}"
                     [matDatepicker]="arrivalDFromIncludeE">
              <mat-datepicker-toggle matSuffix [for]="arrivalDFromIncludeE"></mat-datepicker-toggle>
              <mat-datepicker touchUi="true" #arrivalDFromIncludeE></mat-datepicker>
            </mat-form-field>
            <mat-form-field class="add-segmentation__input">
              <input formControlName="arrivalDToExcludeE" matInput
                     placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SERVICES.ARR_D_TO' | translate}}"
                     [matDatepicker]="arrivalDToExcludeE">
              <mat-datepicker-toggle matSuffix [for]="arrivalDToExcludeE"></mat-datepicker-toggle>
              <mat-datepicker touchUi="true" #arrivalDToExcludeE></mat-datepicker>
            </mat-form-field>
            <mat-form-field class="add-segmentation__input">
              <input matInput formControlName="departureLocationCodeE" type="text"
                     placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SERVICES.DEP_LOC' | translate}}"
                     [matAutocomplete]="airportfromE">
              <mat-autocomplete #airportfromE="matAutocomplete">
                <mat-option *ngFor="let airport of airportsFromOptionsE | async"
                            [value]="airport.locationCode">{{ airport.locationCode }}</mat-option>
              </mat-autocomplete>
            </mat-form-field>
            <mat-form-field class="add-segmentation__input">
              <input matInput formControlName="arrivalLocationCodeE" type="text"
                     placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SERVICES.ARR_LOC' | translate}}"
                     [matAutocomplete]="airporttoE">
              <mat-autocomplete #airporttoE="matAutocomplete">
                <mat-option *ngFor="let airport of airportsToOptionsE | async"
                            [value]="airport.locationCode">{{ airport.locationCode }}</mat-option>
              </mat-autocomplete>
            </mat-form-field>
            <mat-form-field class="add-segmentation__input">
              <input matInput formControlName="serviceCodeE" type="text"
                     placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SERVICES.SERVICE_CODE' | translate}}">
            </mat-form-field>
            <mat-form-field class="add-segmentation__input">
              <input matInput formControlName="notServiceCodeE" type="text"
                     placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SERVICES.NOT_SERVICE_CODE' | translate}}">
            </mat-form-field>
            <mat-form-field class="add-segmentation__input">
              <input matInput formControlName="posGdsE" type="text"
                     placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SERVICES.POS_GDS' | translate}}">
            </mat-form-field>
            <!--<mat-form-field class="add-segmentation__input">-->
            <!--<input matInput type="text" placeholder="Код страны (точка продажи)">-->
            <!--</mat-form-field>-->
            <!--<mat-form-field class="add-segmentation__input">-->
            <!--<input matInput type="text" placeholder="Код порта/города (точка продажи)">-->
            <!--</mat-form-field>-->
            <mat-form-field class="add-segmentation__input">
              <input matInput formControlName="posIdE" type="text"
                     placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SERVICES.POS_ID' | translate}}">
            </mat-form-field>
            <mat-form-field class="add-segmentation__input">
              <input matInput formControlName="posAgencyE" type="text"
                     placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SERVICES.POS_AGENCY' | translate}}">
            </mat-form-field>
            <mat-form-field class="add-segmentation__input">
              <input matInput formControlName="emdIdSellTypeE" type="text"
                     placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SERVICES.SELL_TYPE' | translate}}"
                     [matAutocomplete]="sellType">
              <mat-autocomplete #sellType="matAutocomplete" [displayWith]="displaySellTypeCodeFn">
                <mat-option *ngFor="let sellType of sellTypeOptionsE | async" [value]="sellType">
                  {{ sellType.sellTypeCode }}
                </mat-option>
              </mat-autocomplete>
            </mat-form-field>
            <mat-form-field class="add-segmentation__input">
              <input matInput formControlName="craftE" type="text"
                     placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SERVICES.AIRCRAFT_TYPE' | translate}}">
            </mat-form-field>
            <mat-form-field class="add-segmentation__input">
              <input matInput formControlName="dateOfServiceFromIncludeE"
                     placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SERVICES.DATE_OF_SERVICE_FROM_INCLUDE' | translate}}"
                     [matDatepicker]="DateOfServiceFromInclude">
              <mat-datepicker-toggle matSuffix [for]="DateOfServiceFromInclude"></mat-datepicker-toggle>
              <mat-datepicker touchUi="true" #DateOfServiceFromInclude></mat-datepicker>
            </mat-form-field>
            <mat-form-field class="add-segmentation__input">
              <input matInput formControlName="dateOfServiceToExcludeE"
                     placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SERVICES.DATE_OF_SERVICE_TO_EXCLUDE' | translate}}"
                     [matDatepicker]="DateOfServiceToExclude">
              <mat-datepicker-toggle matSuffix [for]="DateOfServiceToExclude"></mat-datepicker-toggle>
              <mat-datepicker touchUi="true" #DateOfServiceToExclude></mat-datepicker>
            </mat-form-field>
            <mat-form-field class="add-segmentation__input">
              <input matInput formControlName="dateTransFromIncludeE"
                     placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SERVICES.DATE_TRANS_FROM_INCLUDE' | translate}}"
                     [matDatepicker]="DateTransFromInclude">
              <mat-datepicker-toggle matSuffix [for]="DateTransFromInclude"></mat-datepicker-toggle>
              <mat-datepicker touchUi="true" #DateTransFromInclude></mat-datepicker>
            </mat-form-field>
            <mat-form-field class="add-segmentation__input">
              <input matInput formControlName="dateTransToExcludeE"
                     placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SERVICES.DATE_TRANS_TO_EXCLUDE' | translate}}"
                     [matDatepicker]="DateTransToExclude">
              <mat-datepicker-toggle matSuffix [for]="DateTransToExclude"></mat-datepicker-toggle>
              <mat-datepicker touchUi="true" #DateTransToExclude></mat-datepicker>
            </mat-form-field>
          </div>
          <div class="add-segmentation__stepper-button">
            <button mat-button
                    matStepperPrevious>{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.BUTTON.PREV' | translate}}</button>
            <button mat-button matStepperNext>{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.BUTTON.NEXT' | translate}}</button>
          </div>
        </mat-step>

        <mat-step>
          <ng-template
            matStepLabel>{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.RESERVATION_DATE_RANG.TITLE' | translate}}</ng-template>
          <div class="add-segmentation__content">
            <mat-form-field class="add-segmentation__input">
              <input formControlName="bookingCreateDateFromInclude" matInput
                     placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.RESERVATION_DATE_RANG.DATE_FROM' | translate}}"
                     [matDatepicker]="bookingCreateDateFromInclude">
              <mat-datepicker-toggle matSuffix [for]="bookingCreateDateFromInclude"></mat-datepicker-toggle>
              <mat-datepicker touchUi="true" #bookingCreateDateFromInclude></mat-datepicker>
            </mat-form-field>
            <mat-form-field class="add-segmentation__input">
              <input formControlName="bookingCreateDateToExclude" matInput
                     placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.RESERVATION_DATE_RANG.DATE_TO' | translate}}"
                     [matDatepicker]="bookingCreateDateToExclude">
              <mat-datepicker-toggle matSuffix [for]="bookingCreateDateToExclude"></mat-datepicker-toggle>
              <mat-datepicker touchUi="true" #bookingCreateDateToExclude></mat-datepicker>
            </mat-form-field>
          </div>
          <div class="add-segmentation__stepper-button">
            <button mat-button
                    matStepperPrevious>{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.BUTTON.PREV' | translate}}</button>
            <button mat-button matStepperNext>{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.BUTTON.NEXT' | translate}}</button>
          </div>
        </mat-step>

        <mat-step>
          <ng-template
            matStepLabel>{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.PROFILE_DETAILS.TITLE' | translate}}</ng-template>
          <div class="add-segmentation__content">
            <mat-form-field class="add-segmentation__input">
              <input matInput formControlName="ageGroup" type="text"
                     placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.PROFILE_DETAILS.AGE_GROUP' | translate}}"
                     [matAutocomplete]="ageGroup">
              <mat-autocomplete #ageGroup="matAutocomplete">
                <mat-option *ngFor="let ageGroup of ageGroupOptions | async"
                            [value]="ageGroup.title">{{ ageGroup.title }}</mat-option>
              </mat-autocomplete>
            </mat-form-field>
            <mat-form-field class="add-segmentation__input">
              <mat-select formControlName="gender"
                          placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.PROFILE_DETAILS.GENDER.TITLE' | translate}}">
                <mat-option></mat-option>
                <mat-option
                  value="M">{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.PROFILE_DETAILS.GENDER.M' | translate}}</mat-option>
                <mat-option
                  value="F">{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.PROFILE_DETAILS.GENDER.F' | translate}}</mat-option>
              </mat-select>
            </mat-form-field>
            <mat-form-field class="add-segmentation__input">
              <input matInput formControlName="dobFromInclude"
                     placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.PROFILE_DETAILS.DOB_FROM' | translate}}"
                     [matDatepicker]="dobFromInclude">
              <mat-datepicker-toggle matSuffix [for]="dobFromInclude"></mat-datepicker-toggle>
              <mat-datepicker touchUi="true" #dobFromInclude></mat-datepicker>
            </mat-form-field>
            <mat-form-field class="add-segmentation__input">
              <input matInput formControlName="dobToExclude"
                     placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.PROFILE_DETAILS.DOB_TO' | translate}}"
                     [matDatepicker]="dobToExclude">
              <mat-datepicker-toggle matSuffix [for]="dobToExclude"></mat-datepicker-toggle>
              <mat-datepicker touchUi="true" #dobToExclude></mat-datepicker>
            </mat-form-field>
            <mat-form-field class="add-segmentation__input">
              <input matInput formControlName="relevanceFrom" type="text"
                     placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.PROFILE_DETAILS.RELEVANCE_FROM' | translate}}">
            </mat-form-field>
            <mat-form-field class="add-segmentation__input">
              <input matInput formControlName="relevanceTo" type="text"
                     placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.PROFILE_DETAILS.RELEVANCE_TO' | translate}}">
            </mat-form-field>
            <mat-radio-group formControlName="withChild" class="add-segmentation__input">
              <div class="add-segmentation__input-radio-wrapper">
                <div class="add-segmentation__input-radio-group">
                  <mat-radio-button class="add-segmentation__input-radio _margin-none"
                                    [value]="true">{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.PROFILE_DETAILS.FLIES_WITH_CHILDREN' | translate}}
                  </mat-radio-button>
                </div>
                <div class="add-segmentation__input-radio-group _right">
                  <mat-radio-button class="add-segmentation__input-radio _margin-none"
                                    [value]="false">{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.PROFILE_DETAILS.FLIES_WITHOUT_CHILDREN' | translate}}
                  </mat-radio-button>
                </div>
              </div>
            </mat-radio-group>
          </div>
          <div class="add-segmentation__stepper-button">
            <button mat-button
                    matStepperPrevious>{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.BUTTON.PREV' | translate}}</button>
            <button mat-button (click)="changeForm()">{{'BUTTON.TO_FROM' | translate}}</button>
          </div>
        </mat-step>
      </mat-vertical-stepper>
    </form>
  </div>


  <!-- ################################################################################################################################################################  -->

  <mat-card *ngIf="isFormSegmentation && isProgressSegmentationParams">
    <mat-progress-bar mode="buffer"></mat-progress-bar>
  </mat-card>

  <div class="add-segmentation__change" *ngIf="isFormSegmentation && !isProgressSegmentationParams">
    <form class="add-segmentation__form" [formGroup]="formSegmentation">
      <div class="row no-gutters">
        <div class="col">
          <mat-card class="add-segmentation__card">
            <mat-card-content class="add-segmentation__content">
              <mat-form-field class="add-segmentation__input">
                <input matInput formControlName="segmentationTitle" type="text"
                       placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.GROUP_SEGMENTATION.GROUP_SEGMENTATION' | translate}}">
                <mat-error>{{'FIELD.ERROR.OBLIGATORY_FIELD' | translate}}</mat-error>
              </mat-form-field>
              <mat-form-field class="add-segmentation__input">
                <mat-select formControlName="segmentationGranularity"
                            placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.GROUP_SEGMENTATION.GRANULARITY.TITLE' | translate}}">
                  <mat-option
                    value="1">{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.GROUP_SEGMENTATION.GRANULARITY.PASSENGER' | translate}}</mat-option>
                  <mat-option
                    value="2">{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.GROUP_SEGMENTATION.GRANULARITY.ORDERS' | translate}}</mat-option>
                  <mat-option
                    value="3">{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.GROUP_SEGMENTATION.GRANULARITY.COUPON' | translate}}</mat-option>
                </mat-select>
                <mat-error>{{'FIELD.ERROR.OBLIGATORY_FIELD' | translate}}</mat-error>
              </mat-form-field>
            </mat-card-content>
          </mat-card>
        </div>
      </div>


      <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 row-cols-xl-4 no-gutters">
        <div class="col _no-mb">
          <div class="row row-cols-1 no-gutters">
            <div class="col">
              <mat-card class="add-segmentation__card">
                <div class="add-segmentation__content-title-wrapper">
              <span
                class="add-segmentation__content-title">{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SUBJECT_ANALYSIS.TITLE' | translate}}</span>
                  <mat-icon *ngIf="resetRadioButtonFood"
                            matTooltip="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SUBJECT_ANALYSIS.REMOVE' | translate}}"
                            (click)="resetRadioButton('subjectAnalysis')">remove_circle_outline
                  </mat-icon>
                </div>
                <mat-card-content class="add-segmentation__content">
                  <mat-radio-group class="add-segmentation__input" formControlName="subjectAnalysis">
                    <div class="add-segmentation__input-radio-wrapper">
                      <div class="add-segmentation__input-radio-group">
                        <mat-radio-button class="add-segmentation__input-radio"
                                          value="segment">{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SUBJECT_ANALYSIS.SEGMENT' | translate}}
                        </mat-radio-button>
                        <mat-radio-button class="add-segmentation__input-radio _margin-none"
                                          value="payment">{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SUBJECT_ANALYSIS.PAYMENT' | translate}}
                        </mat-radio-button>
                      </div>
                    </div>
                  </mat-radio-group>
                </mat-card-content>
              </mat-card>
            </div>
            <div class="col">
              <mat-card class="add-segmentation__card">
            <span
              class="add-segmentation__content-title">{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.NUMBER_SEGMENTS.TITLE' | translate}}</span>
                <mat-card-content class="add-segmentation__content">
                  <mat-form-field class="add-segmentation__input">
                    <input formControlName="segmentsCountFromInclude" matInput type="text"
                           placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.NUMBER_SEGMENTS.FROM' | translate}}">
                    <mat-error>{{'FIELD.ERROR.OBLIGATORY_FIELD' | translate}}</mat-error>
                  </mat-form-field>
                  <mat-form-field class="add-segmentation__input">
                    <input formControlName="segmentsCountToExclude" matInput type="text"
                           placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.NUMBER_SEGMENTS.TO' | translate}}">
                    <mat-error>{{'FIELD.ERROR.OBLIGATORY_FIELD' | translate}}</mat-error>
                  </mat-form-field>
                  <mat-form-field class="add-segmentation__input">
                    <mat-select formControlName="eDocTypeS">
                      <mat-option
                        value="T">{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.NUMBER_SEGMENTS.TICKETS' | translate}}</mat-option>
                      <mat-option
                        value="E">{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.NUMBER_SEGMENTS.SERVICES' | translate}}</mat-option>
                    </mat-select>
                    <mat-error>{{'FIELD.ERROR.OBLIGATORY_FIELD' | translate}}</mat-error>
                  </mat-form-field>
                </mat-card-content>
              </mat-card>
            </div>
            <div class="col">
              <mat-card class="add-segmentation__card">
            <span
              class="add-segmentation__content-title">{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.ORDER_AMOUNT.TITLE' | translate}}</span>
                <mat-card-content class="add-segmentation__content">
                  <mat-form-field class="add-segmentation__input">
                    <input formControlName="moneyAmountFromInclude" matInput type="text"
                           placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.ORDER_AMOUNT.FROM' | translate}}">
                    <mat-error>{{'FIELD.ERROR.OBLIGATORY_FIELD' | translate}}</mat-error>
                  </mat-form-field>
                  <mat-form-field class="add-segmentation__input">
                    <input formControlName="moneyAmountToExclude" matInput type="text"
                           placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.ORDER_AMOUNT.TO' | translate}}">
                    <mat-error>{{'FIELD.ERROR.OBLIGATORY_FIELD' | translate}}</mat-error>
                  </mat-form-field>
                  <mat-form-field class="add-segmentation__input">
                    <input matInput formControlName="currency" type="text"
                           placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.ORDER_AMOUNT.CURRENCY' | translate}}">
                  </mat-form-field>
                  <mat-form-field class="add-segmentation__input">
                    <mat-select formControlName="eDocTypeP">
                      <mat-option
                        value="T">{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.ORDER_AMOUNT.TICKETS' | translate}}</mat-option>
                      <mat-option
                        value="E">{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.ORDER_AMOUNT.SERVICES' | translate}}</mat-option>
                    </mat-select>
                    <mat-error>{{'FIELD.ERROR.OBLIGATORY_FIELD' | translate}}</mat-error>
                  </mat-form-field>
                </mat-card-content>
              </mat-card>
            </div>
          </div>
        </div>


        <div class="col">
          <mat-card class="add-segmentation__card">
            <span
              class="add-segmentation__content-title">{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.TICKET.TITLE' | translate}}</span>
            <mat-card-content class="add-segmentation__content _none-justify">
              <mat-form-field class="add-segmentation__input">
                <input matInput formControlName="timeBeforeDepartureT" mask="d0 Hh:m0" [dropSpecialCharacters]="false"
                       [showMaskTyped]="true"
                       placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.TICKET.DISPATCH_TIME' | translate}}">
              </mat-form-field>
              <mat-form-field class="profile-search__input">
                <input matInput formControlName="airlineLCodeIdT" type="text"
                       placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.TICKET.AIRLINE_L_CODE' | translate}}"
                       [matAutocomplete]="airlineLCodeT">
                <mat-autocomplete #airlineLCodeT="matAutocomplete" [displayWith]="displayFn">
                  <mat-option *ngFor="let airlineLCode of airlineLCodeOptionsT | async" [value]="airlineLCode">
                    {{airlineLCode.title}}
                  </mat-option>
                </mat-autocomplete>
              </mat-form-field>
              <mat-form-field class="add-segmentation__input">
                <input matInput type="text"
                       placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.TICKET.FLIGHT_NO' | translate}}"
                       formControlName="flightNoT">
              </mat-form-field>
              <mat-form-field class="add-segmentation__input">
                <input formControlName="arrivalDFromIncludeT" matInput
                       placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.TICKET.ARR_D_FROM' | translate}}"
                       [matDatepicker]="arrivalDFromIncludeT">
                <mat-datepicker-toggle matSuffix [for]="arrivalDFromIncludeT"></mat-datepicker-toggle>
                <mat-datepicker touchUi="true" #arrivalDFromIncludeT></mat-datepicker>
              </mat-form-field>
              <mat-form-field class="add-segmentation__input">
                <input formControlName="arrivalDToExcludeT" matInput
                       placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.TICKET.ARR_D_TO' | translate}}"
                       [matDatepicker]="arrivalDToExcludeT">
                <mat-datepicker-toggle matSuffix [for]="arrivalDToExcludeT"></mat-datepicker-toggle>
                <mat-datepicker touchUi="true" #arrivalDToExcludeT></mat-datepicker>
              </mat-form-field>
              <mat-form-field class="add-segmentation__input">
                <input matInput formControlName="departureLocationCodeT" type="text"
                       placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.TICKET.DEP_LOC' | translate}}"
                       [matAutocomplete]="airportfromT">
                <mat-autocomplete #airportfromT="matAutocomplete">
                  <mat-option *ngFor="let airport of airportsFromOptionsT | async"
                              [value]="airport.locationCode">{{ airport.locationCode }}</mat-option>
                </mat-autocomplete>
              </mat-form-field>
              <mat-form-field class="add-segmentation__input">
                <input matInput formControlName="arrivalLocationCodeT" type="text"
                       placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.TICKET.ARR_LOC' | translate}}"
                       [matAutocomplete]="airporttoT">
                <mat-autocomplete #airporttoT="matAutocomplete">
                  <mat-option *ngFor="let airport of airportsToOptionsT | async"
                              [value]="airport.locationCode">{{ airport.locationCode }}</mat-option>
                </mat-autocomplete>
              </mat-form-field>
              <mat-form-field class="add-segmentation__input">
                <input matInput formControlName="cabinT" type="text"
                       placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.TICKET.CABIN' | translate}}">
              </mat-form-field>
              <mat-form-field class="add-segmentation__input">
                <input matInput formControlName="rbdT" type="text"
                       placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.TICKET.RDB' | translate}}">
              </mat-form-field>
              <mat-form-field class="add-segmentation__input">
                <input matInput formControlName="fareCodeT" type="text"
                       placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.TICKET.RARE_CODE' | translate}}">
              </mat-form-field>
              <mat-form-field class="add-segmentation__input">
                <input matInput formControlName="posGdsT" type="text"
                       placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.TICKET.POS_GDS' | translate}}">
              </mat-form-field>
              <!--<mat-form-field class="add-segmentation__input">-->
              <!--<input matInput formControlName="serviceCodeT" type="text" placeholder="Код услути">-->
              <!--</mat-form-field>-->
              <!--<mat-form-field class="add-segmentation__input">-->
              <!--<input matInput type="text" placeholder="Код страны (точка продажи)">-->
              <!--</mat-form-field>-->
              <!--<mat-form-field class="add-segmentation__input">-->
              <!--<input matInput type="text" placeholder="Код порта/города (точка продажи)">-->
              <!--</mat-form-field>-->
              <mat-form-field class="add-segmentation__input">
                <input matInput formControlName="posIdT" type="text"
                       placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.TICKET.POS_ID' | translate}}">
              </mat-form-field>
              <mat-form-field class="add-segmentation__input">
                <input matInput formControlName="posAgencyT" type="text"
                       placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.TICKET.POS_AGENCY' | translate}}">
              </mat-form-field>
            </mat-card-content>
          </mat-card>
        </div>


        <div class="col">
          <mat-card class="add-segmentation__card">
            <span
              class="add-segmentation__content-title">{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SERVICES.TITLE' | translate}}</span>
            <mat-card-content class="add-segmentation__content _none-justify">
              <mat-form-field class="profile-search__input">
                <input matInput formControlName="timeBeforeDepartureE" mask="d0 Hh:m0" [dropSpecialCharacters]="false"
                       [showMaskTyped]="true"
                       placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SERVICES.DISPATCH_TIME' | translate}}">
              </mat-form-field>
              <mat-form-field class="profile-search__input">
                <input matInput formControlName="airlineLCodeIdE" type="text"
                       placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SERVICES.AIRLINE_L_CODE' | translate}}"
                       [matAutocomplete]="airlineLCodeE">
                <mat-autocomplete #airlineLCodeE="matAutocomplete" [displayWith]="displayFn">
                  <mat-option *ngFor="let airlineLCode of airlineLCodeOptionsE | async" [value]="airlineLCode">
                    {{airlineLCode.title}}
                  </mat-option>
                </mat-autocomplete>
              </mat-form-field>
              <mat-form-field class="add-segmentation__input">
                <input matInput type="text"
                       placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SERVICES.FLIGHT_NO' | translate}}"
                       formControlName="flightNoE">
              </mat-form-field>
              <mat-form-field class="add-segmentation__input">
                <input formControlName="arrivalDFromIncludeE" matInput
                       placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SERVICES.ARR_D_FROM' | translate}}"
                       [matDatepicker]="arrivalDFromIncludeE">
                <mat-datepicker-toggle matSuffix [for]="arrivalDFromIncludeE"></mat-datepicker-toggle>
                <mat-datepicker touchUi="true" #arrivalDFromIncludeE></mat-datepicker>
              </mat-form-field>
              <mat-form-field class="add-segmentation__input">
                <input formControlName="arrivalDToExcludeE" matInput
                       placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SERVICES.ARR_D_TO' | translate}}"
                       [matDatepicker]="arrivalDToExcludeE">
                <mat-datepicker-toggle matSuffix [for]="arrivalDToExcludeE"></mat-datepicker-toggle>
                <mat-datepicker touchUi="true" #arrivalDToExcludeE></mat-datepicker>
              </mat-form-field>
              <mat-form-field class="add-segmentation__input">
                <input matInput formControlName="departureLocationCodeE" type="text"
                       placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SERVICES.DEP_LOC' | translate}}"
                       [matAutocomplete]="airportfromE">
                <mat-autocomplete #airportfromE="matAutocomplete">
                  <mat-option *ngFor="let airport of airportsFromOptionsE | async"
                              [value]="airport.locationCode">{{ airport.locationCode }}</mat-option>
                </mat-autocomplete>
              </mat-form-field>
              <mat-form-field class="add-segmentation__input">
                <input matInput formControlName="arrivalLocationCodeE" type="text"
                       placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SERVICES.ARR_LOC' | translate}}"
                       [matAutocomplete]="airporttoE">
                <mat-autocomplete #airporttoE="matAutocomplete">
                  <mat-option *ngFor="let airport of airportsToOptionsE | async"
                              [value]="airport.locationCode">{{ airport.locationCode }}</mat-option>
                </mat-autocomplete>
              </mat-form-field>
              <mat-form-field class="add-segmentation__input">
                <input matInput formControlName="serviceCodeE" type="text"
                       placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SERVICES.SERVICE_CODE' | translate}}">
              </mat-form-field>
              <mat-form-field class="add-segmentation__input">
                <input matInput formControlName="notServiceCodeE" type="text"
                       placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SERVICES.NOT_SERVICE_CODE' | translate}}">
              </mat-form-field>
              <mat-form-field class="add-segmentation__input">
                <input matInput formControlName="posGdsE" type="text"
                       placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SERVICES.POS_GDS' | translate}}">
              </mat-form-field>
              <!--<mat-form-field class="add-segmentation__input">-->
              <!--<input matInput type="text" placeholder="Код страны (точка продажи)">-->
              <!--</mat-form-field>-->
              <!--<mat-form-field class="add-segmentation__input">-->
              <!--<input matInput type="text" placeholder="Код порта/города (точка продажи)">-->
              <!--</mat-form-field>-->
              <mat-form-field class="add-segmentation__input">
                <input matInput formControlName="posIdE" type="text"
                       placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SERVICES.POS_ID' | translate}}">
              </mat-form-field>
              <mat-form-field class="add-segmentation__input">
                <input matInput formControlName="posAgencyE" type="text"
                       placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SERVICES.POS_AGENCY' | translate}}">
              </mat-form-field>
              <mat-form-field class="add-segmentation__input">
                <input matInput formControlName="emdIdSellTypeE" type="text"
                       placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SERVICES.SELL_TYPE' | translate}}"
                       [matAutocomplete]="sellType">
                <mat-autocomplete #sellType="matAutocomplete" [displayWith]="displaySellTypeCodeFn">
                  <mat-option *ngFor="let sellType of sellTypeOptionsE | async" [value]="sellType">
                    {{ sellType.sellTypeCode }}
                  </mat-option>
                </mat-autocomplete>
              </mat-form-field>
              <mat-form-field class="add-segmentation__input">
                <input matInput formControlName="craftE" type="text"
                       placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SERVICES.AIRCRAFT_TYPE' | translate}}">
              </mat-form-field>
              <mat-form-field class="add-segmentation__input">
                <input matInput formControlName="dateOfServiceFromIncludeE"
                       placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SERVICES.DATE_OF_SERVICE_FROM_INCLUDE' | translate}}"
                       [matDatepicker]="DateOfServiceFromInclude">
                <mat-datepicker-toggle matSuffix [for]="DateOfServiceFromInclude"></mat-datepicker-toggle>
                <mat-datepicker touchUi="true" #DateOfServiceFromInclude></mat-datepicker>
              </mat-form-field>
              <mat-form-field class="add-segmentation__input">
                <input matInput formControlName="dateOfServiceToExcludeE"
                       placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SERVICES.DATE_OF_SERVICE_TO_EXCLUDE' | translate}}"
                       [matDatepicker]="DateOfServiceToExclude">
                <mat-datepicker-toggle matSuffix [for]="DateOfServiceToExclude"></mat-datepicker-toggle>
                <mat-datepicker touchUi="true" #DateOfServiceToExclude></mat-datepicker>
              </mat-form-field>
              <mat-form-field class="add-segmentation__input">
                <input matInput formControlName="dateTransFromIncludeE"
                       placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SERVICES.DATE_TRANS_FROM_INCLUDE' | translate}}"
                       [matDatepicker]="DateTransFromInclude">
                <mat-datepicker-toggle matSuffix [for]="DateTransFromInclude"></mat-datepicker-toggle>
                <mat-datepicker touchUi="true" #DateTransFromInclude></mat-datepicker>
              </mat-form-field>
              <mat-form-field class="add-segmentation__input">
                <input matInput formControlName="dateTransToExcludeE"
                       placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.SERVICES.DATE_TRANS_TO_EXCLUDE' | translate}}"
                       [matDatepicker]="DateTransToExclude">
                <mat-datepicker-toggle matSuffix [for]="DateTransToExclude"></mat-datepicker-toggle>
                <mat-datepicker touchUi="true" #DateTransToExclude></mat-datepicker>
              </mat-form-field>
            </mat-card-content>
          </mat-card>
        </div>


        <div class="col col-lg-8 _no-mb">
          <div class="row row-cols-1 row-cols-lg-2 row-cols-xl-1 no-gutters">
            <div class="col">
              <mat-card class="add-segmentation__card">
            <span
              class="add-segmentation__content-title">{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.RESERVATION_DATE_RANG.TITLE' | translate}}</span>
                <mat-card-content class="add-segmentation__content">

                  <mat-form-field class="add-segmentation__input">
                    <input formControlName="bookingCreateDateFromInclude" matInput
                           placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.RESERVATION_DATE_RANG.DATE_FROM' | translate}}"
                           [matDatepicker]="bookingCreateDateFromInclude">
                    <mat-datepicker-toggle matSuffix [for]="bookingCreateDateFromInclude"></mat-datepicker-toggle>
                    <mat-datepicker touchUi="true" #bookingCreateDateFromInclude></mat-datepicker>
                  </mat-form-field>
                  <mat-form-field class="add-segmentation__input">
                    <input formControlName="bookingCreateDateToExclude" matInput
                           placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.RESERVATION_DATE_RANG.DATE_TO' | translate}}"
                           [matDatepicker]="bookingCreateDateToExclude">
                    <mat-datepicker-toggle matSuffix [for]="bookingCreateDateToExclude"></mat-datepicker-toggle>
                    <mat-datepicker touchUi="true" #bookingCreateDateToExclude></mat-datepicker>
                  </mat-form-field>
                </mat-card-content>
              </mat-card>
            </div>
            <div class="col ">
              <mat-card class="add-segmentation__card">
                <mat-card-content class="add-segmentation__content">
              <span
                class="add-segmentation__content-title">{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.PROFILE_DETAILS.TITLE' | translate}}</span>
                  <mat-form-field class="add-segmentation__input">
                    <input matInput formControlName="ageGroup" type="text"
                           placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.PROFILE_DETAILS.AGE_GROUP' | translate}}"
                           [matAutocomplete]="ageGroup">
                    <mat-autocomplete #ageGroup="matAutocomplete">
                      <mat-option *ngFor="let ageGroup of ageGroupOptions | async"
                                  [value]="ageGroup.title">{{ ageGroup.title }}</mat-option>
                    </mat-autocomplete>
                  </mat-form-field>
                  <mat-form-field class="add-segmentation__input">
                    <mat-select formControlName="gender"
                                placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.PROFILE_DETAILS.GENDER.TITLE' | translate}}">
                      <mat-option></mat-option>
                      <mat-option
                        value="M">{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.PROFILE_DETAILS.GENDER.M' | translate}}</mat-option>
                      <mat-option
                        value="F">{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.PROFILE_DETAILS.GENDER.F' | translate}}</mat-option>
                    </mat-select>
                  </mat-form-field>
                  <mat-form-field class="add-segmentation__input">
                    <input matInput formControlName="dobFromInclude"
                           placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.PROFILE_DETAILS.DOB_FROM' | translate}}"
                           [matDatepicker]="dobFromInclude">
                    <mat-datepicker-toggle matSuffix [for]="dobFromInclude"></mat-datepicker-toggle>
                    <mat-datepicker touchUi="true" #dobFromInclude></mat-datepicker>
                  </mat-form-field>
                  <mat-form-field class="add-segmentation__input">
                    <input matInput formControlName="dobToExclude"
                           placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.PROFILE_DETAILS.DOB_TO' | translate}}"
                           [matDatepicker]="dobToExclude">
                    <mat-datepicker-toggle matSuffix [for]="dobToExclude"></mat-datepicker-toggle>
                    <mat-datepicker touchUi="true" #dobToExclude></mat-datepicker>
                  </mat-form-field>
                  <mat-form-field class="add-segmentation__input">
                    <input matInput formControlName="relevanceFrom" type="text"
                           placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.PROFILE_DETAILS.RELEVANCE_FROM' | translate}}">
                  </mat-form-field>
                  <mat-form-field class="add-segmentation__input">
                    <input matInput formControlName="relevanceTo" type="text"
                           placeholder="{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.PROFILE_DETAILS.RELEVANCE_TO' | translate}}">
                  </mat-form-field>
                  <mat-radio-group formControlName="withChild" class="add-segmentation__input">
                    <div class="add-segmentation__input-radio-wrapper">
                      <div class="add-segmentation__input-radio-group">
                        <mat-radio-button class="add-segmentation__input-radio _margin-none"
                                          [value]="true">{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.PROFILE_DETAILS.FLIES_WITH_CHILDREN' | translate}}
                        </mat-radio-button>
                      </div>
                      <div class="add-segmentation__input-radio-group _right">
                        <mat-radio-button class="add-segmentation__input-radio _margin-none"
                                          [value]="false">{{'PAGE.SEGMENTATION.ADD_SEGMENTATION.PROFILE_DETAILS.FLIES_WITHOUT_CHILDREN' | translate}}
                        </mat-radio-button>
                      </div>
                    </div>
                  </mat-radio-group>
                </mat-card-content>
              </mat-card>
            </div>
          </div>
        </div>
      </div>
    </form>

    <div class="add-segmentation__button-wrapper">
      <button appAccessRights="analytics:update" class="add-segmentation__button" mat-raised-button
              (click)="saveForm()" color="primary" [disabled]="buttonSave">
        <mat-icon>save</mat-icon>
        {{'BUTTON.SAVE' | translate}}
      </button>
      <button appAccessRights="analytics:read" class="add-segmentation__button" mat-raised-button
              (click)="searchForm()" color="primary" [disabled]="buttonSearch">
        <mat-icon>search</mat-icon>
        {{'BUTTON.SEARCH' | translate}}
      </button>
      <button appAccessRights="analytics:update" class="add-segmentation__button" mat-raised-button
              (click)="createForm()" [disabled]="buttonCreate">
        <mat-icon>create</mat-icon>
        {{'BUTTON.EDIT' | translate}}
      </button>
      <button appAccessRights="analytics:update" class="add-segmentation__button" mat-raised-button
              (click)="deleteSegmentation()" color="warn" [disabled]="buttonDelete">
        <mat-icon>delete</mat-icon>
        {{'BUTTON.DELETE' | translate}}
      </button>
      <button class="add-segmentation__button" mat-raised-button (click)="clearForm()">
        <mat-icon>clear</mat-icon>
        {{'BUTTON.CLEAR_FORM' | translate}}
      </button>
    </div>

    <mat-card class="add-segmentation__table" *ngIf="isTable">
      <mat-progress-bar *ngIf="isLoader; else loaderDisabled" mode="buffer"></mat-progress-bar>
      <ng-template #loaderDisabled>
        <mat-card-title>{{segmentationProfiles.customers.length !== 0 ? ('TABLE.RESULT.OK' | translate) : ('TABLE.RESULT.ERROR' | translate)}}</mat-card-title>
        <app-table-async-segmentation-profile
          *ngIf="segmentationProfiles.customers.length !== 0"
          [tableDataSource]="segmentationProfiles.customers">
        </app-table-async-segmentation-profile>
      </ng-template>
    </mat-card>
  </div>
</div>
