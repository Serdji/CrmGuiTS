<div class="profile">
  <mat-card class="profile__card">
    <mat-spinner class="profile__spinner" *ngIf="progress"></mat-spinner>
    <div *ngIf="!progress && !edit">
      <mat-card-header>
        <h2 class="profile__header">Пассажир основное ФИО</h2>
        <mat-icon appAccessRights="customers:update" (click)="toggleEdit()">create</mat-icon>
      </mat-card-header>
      <mat-card-content class="profile__content">
        <div class="profile__box _m-r">
          <div class="profile__list">
            <span><b>Имя: </b>{{profile.firstName}}</span>
          </div>
          <div class="profile__list">
            <span><b>Фамилия: </b>{{profile.lastName}}</span>
          </div>
          <div class="profile__list">
            <span><b>Отчество: </b>{{profile.secondName}}</span>
          </div>
          <div class="profile__list">
            <span><b>Пол: </b>{{profile.gender | fieldTranslation}}</span>
          </div>
          <div class="profile__list">
            <span><b>Дата рождения: </b>{{profile.dob | date:'dd.MM.yyyy' }}</span>
          </div>
        </div>
        <div class="profile__box">
          <div class="profile__list">
            <span><b>Заметки: </b> {{profile.comment}} </span>
          </div>
          <div class="profile__distribution">
            <app-button-editor whatNewsletter="email" [ids]="{customerIds: [id]}"></app-button-editor>
            <app-button-promo-code [ids]="{customerIds: [id]}"></app-button-promo-code>
          </div>
        </div>
      </mat-card-content>
    </div>

    <div *ngIf="edit">
      <mat-card-header>
        <h2 class="profile__header">Редактировать</h2>
        <mat-icon (click)="toggleEdit()">create</mat-icon>
      </mat-card-header>
      <form class="profile__form" [formGroup]="formUpdateProfile">
        <div class="profile__content">
          <div class="profile__box _m-r">
            <mat-form-field class="profile__input">
              <input matInput formControlName="firstName" placeholder="Имя">
              <mat-error>Обязательное поле</mat-error>
            </mat-form-field>
            <mat-form-field class="profile__input">
              <input matInput formControlName="lastName" placeholder="Фамилия">
            </mat-form-field>
            <mat-form-field class="profile__input">
              <input matInput formControlName="secondName" placeholder="Отчество">
            </mat-form-field>
            <mat-form-field class="profile__input">
              <mat-select formControlName="gender" placeholder="Пол">
                <mat-option value="m">М</mat-option>
                <mat-option value="f">Ж</mat-option>
              </mat-select>
            </mat-form-field>
            <mat-form-field class="profile__input">
              <input matInput formControlName="dob" placeholder="Дата рождения" [matDatepicker]="dob">
              <mat-datepicker-toggle matSuffix [for]="dob"></mat-datepicker-toggle>
              <mat-datepicker touchUi="true" #dob></mat-datepicker>
            </mat-form-field>
          </div>
          <div class="profile__box">
            <mat-form-field class="profile__input">
              <textarea rows="15" maxlength="1024" formControlName="comment" matInput placeholder="Заметки"></textarea>
            </mat-form-field>
          </div>
        </div>
        <div class="profile__button-wrapper">
          <button class="profile__button _left-button" mat-raised-button (click)="sendFormUpdateProfile()"
                  color="primary">
            Изменить
          </button>
          <button class="profile__button" mat-raised-button (click)="deleteProfile()" color="warn">
            Удалить
            <mat-icon>delete</mat-icon>
          </button>
        </div>
      </form>
    </div>

  </mat-card>

  <mat-card class="profile__card">
    <div class="profile__show">
      <span (click)="showHiden()"> {{ showHide ? 'Скрыть форму добавления' : 'Показать форму добавления' }}</span>
      <mat-icon (click)="showHiden()"> {{ showHide ? 'fullscreen' : 'fullscreen_exit' }}</mat-icon>
    </div>

    <form *ngIf="showHide" class="profile__form _Add" [formGroup]="formAddProfile">

      <mat-form-field class="profile__input">
        <input matInput formControlName="firstName" placeholder="Имя">
        <mat-error>Обязательное поле</mat-error>
      </mat-form-field>

      <mat-form-field class="profile__input">
        <input matInput formControlName="lastName" placeholder="Фамилия">
      </mat-form-field>

      <mat-form-field class="profile__input">
        <input matInput formControlName="secondName" placeholder="Отчество">
      </mat-form-field>
      <button appAccessRights="customers:update" class="profile__button" mat-raised-button
              (click)="sendFormAddProfile()" color="primary">
        Добавить дополнительно ФИО
      </button>
    </form>

    <div *ngIf="profileNames?.length > 1">
      <mat-progress-bar *ngIf="isLoader; else loaderDisabled" mode="buffer"></mat-progress-bar>
      <ng-template #loaderDisabled>
        <app-table-example-profile-names *ngIf="profileNames.length > 1"
                                          [tableDataSource]="profileNames"></app-table-example-profile-names>
      </ng-template>
    </div>

  </mat-card>
</div>
